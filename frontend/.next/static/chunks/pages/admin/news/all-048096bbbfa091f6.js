(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7617],{4417:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/news/all",function(){return n(8664)}])},2327:function(e,t,n){"use strict";n.d(t,{f7:function(){return l},kS:function(){return p},x4:function(){return h},xh:function(){return u},z2:function(){return o}});var r=n(7568),s=n(414),c=n(9581),a=function(){var e;return e=(0,r.Z)(function(e){var t,n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch("/api/account/user",{method:"GET",headers:{Accept:"application/json"}})];case 1:return[4,(t=r.sent()).json()];case 2:return n=r.sent(),200===t.status?e({type:c.DU,payload:n}):e({type:c._h}),[3,4];case 3:return r.sent(),e({type:c._h}),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}},i=function(){var e;return e=(0,r.Z)(function(e){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch("/api/account/verify",{method:"GET",headers:{Accept:"application/json"}})];case 1:return 200===t.sent().status?(e({type:c.IL}),e(a())):e({type:c.F3}),[3,3];case 2:return t.sent(),e({type:c.F3}),[3,3];case 3:return[2]}})}),function(t){return e.apply(this,arguments)}},u=function(){var e;return e=(0,r.Z)(function(e){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch("/api/account/refresh",{method:"GET",headers:{Accept:"application/json"}})];case 1:return 200===t.sent().status?(e({type:c.UM}),e(i())):e({type:c.MZ}),[3,3];case 2:return t.sent(),e({type:c.MZ}),[3,3];case 3:return[2]}})}),function(t){return e.apply(this,arguments)}},o=function(e,t,n,a,i){var u;return u=(0,r.Z)(function(r){var u,o;return(0,s.__generator)(this,function(s){switch(s.label){case 0:u=JSON.stringify({first_name:e,last_name:t,username:n,password:a,re_password:i}),r({type:c.Eq}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch("/api/account/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:u})];case 2:return 201===s.sent().status?r({type:c.bp}):r({type:c.YY}),[3,4];case 3:return s.sent(),r({type:c.YY}),[3,4];case 4:return r({type:c.$l}),[2]}})}),function(e){return u.apply(this,arguments)}},l=function(){return function(e){e({type:c.qu})}},h=function(e,t){var n;return n=(0,r.Z)(function(n){var r,i;return(0,s.__generator)(this,function(s){switch(s.label){case 0:r=JSON.stringify({username:e,password:t}),n({type:c.Eq}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch("/api/account/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:r})];case 2:return 200===(i=s.sent()).status?(n({type:c.XP}),n(a())):(console.log(i.status),n({type:c.Qj})),[3,4];case 3:return s.sent(),n({type:c.Qj}),[3,4];case 4:return n({type:c.$l}),[2]}})}),function(e){return n.apply(this,arguments)}},p=function(){var e;return e=(0,r.Z)(function(e){var t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch("/api/account/logout",{method:"POST",headers:{Accept:"application/json"}})];case 1:return 200===t.sent().status?e({type:c.$x}):e({type:c.ek}),[3,3];case 2:return t.sent(),e({type:c.ek}),[3,3];case 3:return[2]}})}),function(t){return e.apply(this,arguments)}}},1233:function(e,t,n){},7733:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var r="https://api.fablanka.org"},2296:function(e,t,n){"use strict";var r=n(5893),s=n(7294),c=n(1043),a=n(2327),i=n(9008),u=n.n(i),o=n(2711),l=n.n(o),h=n(5152),p=n.n(h),d=p()(function(){return Promise.all([n.e(5675),n.e(650),n.e(7875)]).then(n.bind(n,6278))},{loadableGenerated:{webpack:function(){return[6278]}},ssr:!1}),f=p()(function(){return Promise.all([n.e(1664),n.e(650),n.e(3458)]).then(n.bind(n,3458))},{loadableGenerated:{webpack:function(){return[3458]}},ssr:!1}),y=function(e){var t=e.title,n=e.content,i=e.children;(0,s.useEffect)(function(){l().init({duration:1e3})},[]);var o=(0,c.I0)();return(0,s.useEffect)(function(){o&&null!=o&&o((0,a.xh)())},[o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:n})]}),(0,r.jsx)(f,{className:"sticky-sm-top"}),(0,r.jsx)("div",{className:"container-fluid px-5 mt-5",children:i}),(0,r.jsx)("div",{children:(0,r.jsx)(d,{})})]})};y.defaultProps={title:"FabLanka",content:"FabLanka"},t.Z=y},8664:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),s=n(1163),c=n(1043),a=n(2296),i=n(7568),u=n(414),o=n(7294),l=n(9669),h=n.n(l);n(5675);var p=n(1664),d=n.n(p);n(1233);var f=n(7733),y=function(){var e,t=(0,o.useState)([]),n=t[0],s=t[1],c=(e=(0,i.Z)(function(){var e,t;return(0,u.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,h().get("".concat(f.T,"/api/newspage/"))];case 1:return s(e.sent().data),[3,3];case 2:return t=e.sent(),console.log(t),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)});(0,o.useEffect)(function(){c()},[]);var a,l=function(e,t){console.log(e,t),h().patch("".concat(f.T,"/api/newspage/").concat(e,"/"),{status:t}).then(function(e){console.log(e),alert("Change status successfully")}).catch(function(e){console.log(e)})},p=(a=(0,i.Z)(function(e){var t;return(0,u.__generator)(this,function(n){switch(n.label){case 0:if(!window.confirm("Are you sure you want to delete this news? This action cannot be undone."))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,h().delete("".concat(f.T,"/api/newspage/").concat(e))];case 2:return n.sent(),c(),[3,4];case 3:return t=n.sent(),console.log(t),[3,4];case 4:return[2]}})}),function(e){return a.apply(this,arguments)});return(0,r.jsx)("div",{className:"container mb-10",children:(0,r.jsxs)("div",{className:"table-responsive",children:[(0,r.jsx)("h1",{className:"text-center",children:"News"}),(0,r.jsxs)("table",{className:"table table-bordered",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"#"}),(0,r.jsx)("th",{scope:"col",children:"Image"}),(0,r.jsx)("th",{scope:"col",children:"News Title"}),(0,r.jsx)("th",{scope:"col",children:"Summery"}),(0,r.jsx)("th",{scope:"col",children:"Status"}),(0,r.jsx)("th",{scope:"col",children:"Action"})]})}),(0,r.jsx)("tbody",{children:n.map(function(e){return console.log(e.status),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"row",children:e.id}),(0,r.jsx)("td",{className:"text-center",children:(0,r.jsx)("img",{src:e.image,width:100,height:100})}),(0,r.jsx)("td",{children:e.title}),(0,r.jsx)("td",{children:e.summery}),(0,r.jsx)("td",{children:(0,r.jsxs)("select",{onChange:function(t){return l(e.id,t.target.value)},defaultValue:e.status,children:[(0,r.jsx)("option",{value:!0,children:"Active"}),(0,r.jsx)("option",{value:!1,children:"Inactive"})]})}),(0,r.jsx)("td",{className:"text-center",children:(0,r.jsxs)("div",{className:"btn-group-vertical",children:[(0,r.jsx)(d(),{href:"/admin/news/"+e.id,children:(0,r.jsx)("button",{className:"btn btn-warning",children:"Edit"})}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:function(){p(e.id)},children:"Delete"})]})})]},e.id)})})]})]})})},j=function(){var e=(0,s.useRouter)();return console.log(e.pathname),(0,c.v9)(function(e){return e.auth.isAuthenticated}),(0,c.v9)(function(e){return e.auth.user}),(0,c.v9)(function(e){return e.auth.loading}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Z,{title:"FabLanka | News",content:"Dashboard page",children:(0,r.jsx)("div",{className:"container mb-10",children:(0,r.jsx)(y,{})})})})}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[7689,9669,1664,5675,9774,2888,179],function(){return e(e.s=4417)}),_N_E=e.O()}]);